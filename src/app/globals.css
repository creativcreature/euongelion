@import 'tailwindcss';
@import '../../design-system/typography-craft.css';

@font-face {
  font-family: 'Instrument Serif';
  src: url('/fonts/InstrumentSerif-Regular.ttf') format('truetype');
  font-style: normal;
  font-weight: 400;
  font-display: swap;
}

@font-face {
  font-family: 'Instrument Serif';
  src: url('/fonts/InstrumentSerif-Italic.ttf') format('truetype');
  font-style: italic;
  font-weight: 400;
  font-display: swap;
}

@theme {
  /* ============================================
     COLOR TOKENS — The Bold Three (Foundation)
     ============================================ */
  --color-tehom: #0f1b2e;
  --color-scroll: #fff8ec;
  --color-gold: #e2b15b;

  /* Theological Accents (rare, intentional use) */
  --color-burgundy: #8e3f3f;
  --color-olive: #6f8f4f;
  --color-shalom: #4d9fb0;

  /* RGB channels for rgba() usage */
  --color-tehom-rgb: 15, 27, 46;
  --color-scroll-rgb: 255, 248, 236;
  --color-gold-rgb: 226, 177, 91;

  /* ============================================
     SEMANTIC COLOR TOKENS (Dark mode default)
     ============================================ */
  --color-bg: var(--color-tehom);
  --color-fg: var(--color-scroll);
  --color-accent: var(--color-gold);

  /* Text hierarchy */
  --color-text-primary: var(--color-scroll);
  --color-text-secondary: rgba(247, 243, 237, 0.7);
  --color-text-tertiary: rgba(247, 243, 237, 0.5);
  --color-text-muted: rgba(247, 243, 237, 0.4);

  /* UI elements */
  --color-border: rgba(247, 243, 237, 0.1);
  --color-border-strong: rgba(247, 243, 237, 0.2);
  --color-surface: rgba(247, 243, 237, 0.05);
  --color-surface-raised: rgba(247, 243, 237, 0.08);
  --color-overlay: rgba(26, 22, 18, 0.8);

  /* Interactive states */
  --color-hover: rgba(247, 243, 237, 0.1);
  --color-active: rgba(247, 243, 237, 0.15);
  --color-focus-ring: rgba(193, 154, 107, 0.4);

  /* Feedback colors */
  --color-success: #5fa067;
  --color-warning: #b38345;
  --color-error: #b04b4b;
  --color-info: #4d9fb0;

  /* Typography: letter spacing only (font-family on :root below — @theme can't use var() refs to runtime variables) */

  /* Letter spacing tokens */
  --tracking-tight: -0.02em;
  --tracking-normal: 0;
  --tracking-wide: 0.05em;
  --tracking-wider: 0.1em;
  --tracking-widest: 0.2em;

  /* ============================================
     SPACING TOKENS (4px base)
     ============================================ */
  --space-xs: 8px;
  --space-sm: 16px;
  --space-md: 24px;
  --space-lg: 40px;
  --space-xl: 60px;
  --space-2xl: 80px;
  --space-3xl: 120px;

  /* Max widths */
  --max-w-reading: 680px;
  --max-w-content: 800px;
  --max-w-display: 1200px;
  --max-w-full: 1440px;

  /* Touch targets */
  --touch-min: 44px;

  /* ============================================
     BORDER RADIUS
     ============================================ */
  --radius-sm: 2px;
  --radius-md: 4px;
  --radius-lg: 8px;
  --radius-xl: 12px;

  /* ============================================
     SHADOWS (warm-tinted from Tehom)
     ============================================ */
  --shadow-sm: 0 2px 4px rgba(15, 27, 46, 0.14);
  --shadow-md: 0 4px 8px rgba(15, 27, 46, 0.18);
  --shadow-lg: 0 8px 16px rgba(15, 27, 46, 0.24);
  --shadow-xl: 0 16px 32px rgba(15, 27, 46, 0.3);
  --shadow-focus: 0 0 0 3px rgba(226, 177, 91, 0.45);

  /* ============================================
     TRANSITION TOKENS
     ============================================ */
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-bounce: cubic-bezier(0.16, 1, 0.3, 1);

  --duration-fast: 150ms;
  --duration-base: 200ms;
  --duration-moderate: 300ms;
  --duration-slow: 400ms;
  --duration-slower: 600ms;

  /* ============================================
     Z-INDEX TOKENS (Full Scale)
     ============================================ */
  --z-negative: -1;
  --z-base: 0;
  --z-raised: 1;
  --z-dropdown: 10;
  --z-sticky: 100;
  --z-fixed: 200;
  --z-overlay: 300;
  --z-modal: 400;
  --z-popover: 500;
  --z-tooltip: 600;
  --z-toast: 700;
  --z-max: 9999;

  /* ============================================
     EXTENDED SHADOWS
     ============================================ */
  --shadow-xs: 0 1px 2px rgba(15, 27, 46, 0.16);
  --shadow-2xl: 0 24px 48px rgba(15, 27, 46, 0.38);
  --shadow-inner: inset 0 2px 4px rgba(15, 27, 46, 0.14);
  --shadow-glow: 0 0 28px rgba(226, 177, 91, 0.45);
  --shadow-vignette: inset 0 0 100px rgba(8, 14, 26, 0.45);

  /* ============================================
     EXTENDED TRANSITIONS
     ============================================ */
  --duration-instant: 0ms;
  --duration-slowest: 800ms;
  --ease-linear: linear;
  --ease-smooth: cubic-bezier(0.25, 0.1, 0.25, 1);

  /* ============================================
     ACCENT COLOR VARIANTS (Dark-mode lifted)
     ============================================ */
  --color-burgundy-light: #c56a6a;
  --color-olive-light: #9fbe79;
  --color-shalom-light: #79c8d6;

  /* ============================================
     BASELINE GRID (Typography Craft)
     ============================================ */
  --baseline: 8px;

  /* ============================================
     COMPONENT TOKENS
     ============================================ */
  --nav-height: 64px;
  --nav-height-mobile: 56px;
}

/* ============================================
   FONT FAMILY VARIABLES
   Must be outside @theme because they use var() refs
   to runtime CSS variables set on <html>.
   @theme compiles at build time and can't resolve them.
   ============================================ */
:root {
  --font-instrument-serif:
    'Instrument Serif', Georgia, 'Times New Roman', serif;
  --font-family: var(
    --font-instrument-serif,
    'Instrument Serif',
    Georgia,
    serif
  );

  --font-family-display: var(--font-family);
  --font-family-body: var(--font-family);
  --font-family-serif: var(--font-family);
}

/* ============================================
   LIGHT MODE OVERRIDES
   ============================================ */
:root:not(.dark) {
  --color-bg: #fffdf8;
  --color-fg: #121d30;
  --color-text-primary: #121d30;
  --color-text-secondary: rgba(18, 29, 48, 0.76);
  --color-text-tertiary: rgba(18, 29, 48, 0.58);
  --color-text-muted: rgba(18, 29, 48, 0.44);
  --color-border: rgba(18, 29, 48, 0.14);
  --color-border-strong: rgba(18, 29, 48, 0.24);
  --color-surface: rgba(226, 177, 91, 0.08);
  --color-surface-raised: rgba(77, 159, 176, 0.1);
  --color-overlay: rgba(255, 253, 248, 0.84);
  --color-hover: rgba(18, 29, 48, 0.06);
  --color-active: rgba(18, 29, 48, 0.12);
}

@layer base {
  html {
    font-size: clamp(15px, 1vw + 14px, 17px);
    background-color: var(--color-bg);
    color: var(--color-text-primary);
    transition:
      background-color 400ms cubic-bezier(0.4, 0, 0.2, 1),
      color 400ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  body {
    font-family: var(--font-family-serif);
    background-color: var(--color-bg);
    color: var(--color-text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    letter-spacing: var(--tracking-tight);
  }

  /* Reduced motion: simple fades or instant */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Focus states — gold ring with 3px shadow */
  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  textarea:focus-visible,
  [tabindex]:focus-visible {
    outline: 2px solid var(--color-gold);
    outline-offset: 2px;
    box-shadow: var(--shadow-focus);
  }

  /* Skip to content */
  .skip-to-content {
    position: absolute;
    left: -9999px;
    z-index: var(--z-max);
    padding: 1rem 2rem;
    background-color: var(--color-gold);
    color: var(--color-tehom);
    text-decoration: none;
    font-weight: 600;
  }
  .skip-to-content:focus {
    left: 50%;
    top: 1rem;
    transform: translateX(-50%);
  }

  /* Dark mode class — theme transition */
  .dark {
    --color-bg: #0f1b2e;
    --color-fg: #fff8ec;
    --color-text-primary: #fff8ec;
    --color-text-secondary: rgba(255, 248, 236, 0.8);
    --color-text-tertiary: rgba(255, 248, 236, 0.64);
    --color-text-muted: rgba(255, 248, 236, 0.5);
    --color-border: rgba(255, 248, 236, 0.18);
    --color-border-strong: rgba(255, 248, 236, 0.3);
    --color-surface: rgba(255, 248, 236, 0.09);
    --color-surface-raised: rgba(255, 248, 236, 0.14);
    --color-overlay: rgba(10, 18, 34, 0.78);
    --color-hover: rgba(255, 248, 236, 0.14);
    --color-active: rgba(255, 248, 236, 0.2);
  }

  /* Ensure logos don't get inverted */
  img[src*='/logos/'],
  img[alt*='logo'],
  img[alt*='Logo'] {
    filter: none !important;
    mix-blend-mode: normal !important;
  }

  /* High contrast mode */
  @media (prefers-contrast: high) {
    .dark {
      --color-text-secondary: rgba(247, 243, 237, 0.85);
      --color-text-tertiary: rgba(247, 243, 237, 0.75);
      --color-border: rgba(247, 243, 237, 0.3);
      --color-border-strong: rgba(247, 243, 237, 0.5);
    }

    :root:not(.dark) {
      --color-text-secondary: rgba(26, 22, 18, 0.85);
      --color-text-tertiary: rgba(26, 22, 18, 0.75);
      --color-border: rgba(26, 22, 18, 0.3);
      --color-border-strong: rgba(26, 22, 18, 0.5);
    }
  }

  /* Forced colors mode (Windows High Contrast) */
  @media (forced-colors: active) {
    :root {
      --color-bg: Canvas;
      --color-fg: CanvasText;
      --color-text-primary: CanvasText;
      --color-gold: LinkText;
      --color-border: CanvasText;
    }
  }
}

@layer utilities {
  /* ============================================
     TYPOGRAPHY UTILITIES
     ============================================ */

  /* Masthead: EUANGELION wordmark only */
  .text-masthead {
    font-family: var(--font-family-serif) !important;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    font-weight: 400;
  }

  /* Display: hero titles, large headings */
  .text-display {
    font-family: var(--font-family-serif);
    font-weight: 700;
    letter-spacing: -0.02em;
    line-height: 1.1;
  }

  /* Label: small caps UI text */
  .text-label {
    font-family: var(--font-family-serif);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    font-weight: 500;
  }

  /* Serif italic: intro text, teasers */
  .text-serif-italic {
    font-family: var(--font-family-serif) !important;
    font-style: italic;
    line-height: 1.6;
  }

  /* Nav: menu items */
  .text-nav {
    font-family: var(--font-family-serif) !important;
    font-style: italic;
    font-size: 1.5rem;
  }

  /* ============================================
     FLUID TYPOGRAPHY
     ============================================ */
  .vw-heading-xl {
    font-size: clamp(2.5rem, 6vw, 5rem);
    line-height: 1;
  }
  .vw-heading-lg {
    font-size: clamp(1.875rem, 4vw, 3.5rem);
    line-height: 1.1;
  }
  .vw-heading-md {
    font-size: clamp(1.5rem, 2.5vw, 2.5rem);
    line-height: 1.2;
  }
  .vw-body-lg {
    font-size: clamp(1.125rem, 1.5vw, 1.375rem);
    line-height: 1.7;
    max-width: 680px;
  }
  .vw-body {
    font-size: clamp(1rem, 1.2vw, 1.25rem);
    line-height: 1.7;
    max-width: 680px;
  }
  .vw-small {
    font-size: clamp(0.75rem, 0.85vw, 0.9375rem);
    line-height: 1.5;
  }

  /* Day number: architectural display (120-160px) */
  .text-day-number {
    font-family: var(--font-family-serif);
    font-size: clamp(3.75rem, 10vw, 10rem);
    font-weight: 100;
    line-height: 1;
    letter-spacing: -0.02em;
  }

  /* (Old observe-fade / gentle-rise / stagger classes removed — replaced by GSAP FadeIn + StaggerGrid components) */

  /* ============================================
     SCROLL PROGRESS
     ============================================ */
  .scroll-progress {
    position: fixed;
    top: 0;
    left: 0;
    height: 3px;
    background: var(--color-gold);
    transform-origin: left;
    z-index: var(--z-sticky);
    transition:
      transform 100ms cubic-bezier(0, 0, 0.2, 1),
      opacity 300ms cubic-bezier(0, 0, 0.2, 1);
  }

  /* ============================================
     SCRIPTURE BLOCK TREATMENT
     ============================================ */
  .scripture-block {
    border-left: 3px solid var(--color-gold);
    padding-left: 1.5rem;
    padding-top: 0.75rem;
    padding-bottom: 0.75rem;
    background: rgba(193, 154, 107, 0.05);
    font-family: var(--font-family-serif) !important;
    font-style: italic;
    line-height: 1.75;
  }

  /* ============================================
     PULL QUOTE
     ============================================ */
  .pull-quote {
    font-family: var(--font-family-serif);
    font-size: clamp(1.75rem, 3vw, 2.5rem);
    font-weight: 700;
    line-height: 1.3;
  }

  /* ============================================
     MODULE LAYOUT UTILITIES
     ============================================ */

  /* Gold left-accent strip (insight, bridge, scripture fallback) */
  .module-accent {
    border-left: 3px solid var(--color-gold);
    padding-left: 1.5rem;
  }

  /* Callout block: gold-tinted background + left border */
  .module-callout {
    border-left: 3px solid var(--color-gold);
    padding: 1.5rem;
    background: rgba(193, 154, 107, 0.05);
  }

  /* Card surface: raised bg + border */
  .module-card {
    background-color: var(--color-surface-raised);
    border: 1px solid var(--color-border);
  }

  /* Surface card: lighter bg + border */
  .module-surface {
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
  }

  /* Gold-bordered card (takeaway) */
  .module-card-gold {
    background-color: var(--color-surface-raised);
    border: 1px solid var(--color-gold);
  }

  /* Sub-section label (inside modules) */
  .module-sublabel {
    font-family: var(--font-family-serif);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    font-weight: 500;
    font-size: clamp(0.75rem, 0.85vw, 0.9375rem);
    line-height: 1.5;
    color: var(--color-text-muted);
  }

  /* ============================================
     COLOR UTILITIES
     ============================================ */
  .text-gold {
    color: var(--color-gold);
  }
  .text-scroll {
    color: var(--color-scroll);
  }
  .text-tehom {
    color: var(--color-tehom);
  }
  .bg-tehom {
    background-color: var(--color-tehom);
  }
  .bg-scroll {
    background-color: var(--color-scroll);
  }
  .bg-gold {
    background-color: var(--color-gold);
  }
  .border-gold {
    border-color: var(--color-gold);
  }

  /* Semantic utilities */
  .bg-page {
    background-color: var(--color-bg);
  }
  .text-page {
    color: var(--color-text-primary);
  }
  .text-secondary {
    color: var(--color-text-secondary);
  }
  .text-tertiary {
    color: var(--color-text-tertiary);
  }
  .text-muted {
    color: var(--color-text-muted);
  }
  .border-subtle {
    border-color: var(--color-border);
  }
  .border-strong {
    border-color: var(--color-border-strong);
  }
  .bg-surface {
    background-color: var(--color-surface);
  }
  .bg-surface-raised {
    background-color: var(--color-surface-raised);
  }

  /* Gold shimmer (Scripture emphasis, key phrases — animated sweep) */
  @keyframes gold-shimmer-sweep {
    0% {
      background-position: -200% center;
    }
    100% {
      background-position: 200% center;
    }
  }
  .gold-shimmer {
    background: linear-gradient(
      135deg,
      #c19a6b 0%,
      #d4af7f 30%,
      #e8c992 50%,
      #d4af7f 70%,
      #c19a6b 100%
    );
    background-size: 200% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: gold-shimmer-sweep 3s ease-in-out infinite;
  }
  @media (prefers-reduced-motion: reduce) {
    .gold-shimmer {
      animation: none;
      background-size: 100% 100%;
    }
  }

  /* Gold shimmer as background (for non-text elements) */
  .gold-shimmer-bg {
    background: linear-gradient(135deg, #c19a6b 0%, #d4af7f 50%, #c19a6b 100%);
  }

  /* ============================================
     ACCENT COLOR UTILITIES (Pathway colors)
     ============================================ */
  .accent-burgundy {
    color: var(--color-burgundy-light);
  }
  .accent-olive {
    color: var(--color-olive-light);
  }
  .accent-shalom {
    color: var(--color-shalom-light);
  }
  .bg-accent-burgundy {
    background-color: var(--color-burgundy);
  }
  .bg-accent-olive {
    background-color: var(--color-olive);
  }
  .bg-accent-shalom {
    background-color: var(--color-shalom);
  }

  :root:not(.dark) .accent-burgundy {
    color: var(--color-burgundy);
  }
  :root:not(.dark) .accent-olive {
    color: var(--color-olive);
  }
  :root:not(.dark) .accent-shalom {
    color: var(--color-shalom);
  }

  /* ============================================
     SEMANTIC TRANSITION UTILITIES
     ============================================ */
  .transition-theme {
    transition:
      color var(--duration-base) var(--ease-out),
      background-color var(--duration-base) var(--ease-out),
      border-color var(--duration-base) var(--ease-out);
  }
  .transition-opacity {
    transition: opacity var(--duration-base) var(--ease-out);
  }
  .transition-transform {
    transition: transform var(--duration-base) var(--ease-out);
  }
  .transition-shadow {
    transition: box-shadow var(--duration-base) var(--ease-out);
  }

  /* ============================================
     CARD LIFT — shadow on hover (uses shadow tokens!)
     ============================================ */
  .card-lift {
    transition:
      transform var(--duration-base) var(--ease-out),
      box-shadow var(--duration-base) var(--ease-out);
  }
  .card-lift:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
  }

  /* ============================================
     ANIMATED UNDERLINE — gold, left-to-right
     ============================================ */
  .animated-underline {
    position: relative;
  }
  .animated-underline::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: -2px;
    width: 0;
    height: 1px;
    background-color: var(--color-gold);
    transition: width var(--duration-moderate) var(--ease-out);
  }
  .animated-underline:hover::after {
    width: 100%;
  }

  /* ============================================
     BUTTON HOVER — subtle scale + shadow
     ============================================ */
  .btn-hover {
    transition:
      transform var(--duration-fast) var(--ease-out),
      box-shadow var(--duration-fast) var(--ease-out);
  }
  .btn-hover:hover {
    transform: scale(1.02);
    box-shadow: var(--shadow-sm);
  }
  .btn-hover:active {
    transform: scale(0.98);
  }

  /* Breathing animation for prayer text */
  @keyframes breathe {
    0%,
    100% {
      opacity: 0.85;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(1.01);
    }
  }
  .breathe-prayer {
    animation: breathe 6s ease-in-out infinite;
  }
  @media (prefers-reduced-motion: reduce) {
    .breathe-prayer {
      animation: none;
      opacity: 1;
    }
  }

  /* Dot pattern background (paper.design inspired) */
  .dot-pattern {
    background-image: radial-gradient(
      circle,
      var(--color-text-muted) 0.5px,
      transparent 0.5px
    );
    background-size: 24px 24px;
  }

  .dot-pattern-lg {
    background-image: radial-gradient(
      circle,
      var(--color-text-muted) 0.75px,
      transparent 0.75px
    );
    background-size: 32px 32px;
  }

  /* ============================================
     SECTION BREATHING — generous editorial spacing
     ============================================ */
  .section-breathing {
    padding-top: 5rem;
    padding-bottom: 5rem;
  }
  @media (min-width: 768px) {
    .section-breathing {
      padding-top: 8rem;
      padding-bottom: 8rem;
    }
  }
  @media (min-width: 1024px) {
    .section-breathing {
      padding-top: 10rem;
      padding-bottom: 10rem;
    }
  }

  /* ============================================
     SCROLL INDICATOR — animated down-chevron
     ============================================ */
  .scroll-indicator {
    animation: scrollBounce 2s ease-in-out infinite;
  }

  @keyframes scrollBounce {
    0%,
    100% {
      transform: translateY(0);
      opacity: 0.6;
    }
    50% {
      transform: translateY(8px);
      opacity: 1;
    }
  }

  /* ============================================
     READING FLOW — continuous article container
     ============================================ */
  .reading-flow {
    max-width: 900px;
  }

  /* ============================================
     PROSE-LEGAL — legal document styling
     ============================================ */
  .prose-legal {
    max-width: 680px;
  }
  .prose-legal h1 {
    font-family: var(--font-family-serif);
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: 700;
    letter-spacing: -0.02em;
    line-height: 1.1;
    margin-bottom: 1.5rem;
    color: var(--color-text-primary);
  }
  .prose-legal h2 {
    font-family: var(--font-family-serif);
    font-size: clamp(1.25rem, 2vw, 1.75rem);
    font-weight: 600;
    letter-spacing: -0.01em;
    line-height: 1.3;
    margin-top: 2.5rem;
    margin-bottom: 1rem;
    color: var(--color-text-primary);
  }
  .prose-legal h3 {
    font-family: var(--font-family-serif);
    font-size: clamp(1rem, 1.5vw, 1.25rem);
    font-weight: 600;
    margin-top: 2rem;
    margin-bottom: 0.75rem;
    color: var(--color-text-primary);
  }
  .prose-legal p {
    font-size: clamp(1rem, 1.2vw, 1.125rem);
    line-height: 1.7;
    margin-bottom: 1.25rem;
    color: var(--color-text-secondary);
  }
  .prose-legal ul,
  .prose-legal ol {
    margin-bottom: 1.25rem;
    padding-left: 1.5rem;
    color: var(--color-text-secondary);
  }
  .prose-legal li {
    font-size: clamp(1rem, 1.2vw, 1.125rem);
    line-height: 1.7;
    margin-bottom: 0.5rem;
  }
  .prose-legal strong {
    color: var(--color-text-primary);
    font-weight: 600;
  }
  .prose-legal a {
    color: var(--color-gold);
    text-decoration: underline;
    text-underline-offset: 2px;
  }
  .prose-legal a:hover {
    color: var(--color-text-primary);
  }

  /* (Old landing-reveal classes removed — replaced by GSAP FadeIn components) */

  /* ============================================
     LENIS SMOOTH SCROLL
     ============================================ */
  html.lenis,
  html.lenis body {
    height: auto;
  }

  .lenis.lenis-smooth {
    scroll-behavior: auto !important;
  }

  .lenis.lenis-smooth [data-lenis-prevent] {
    overscroll-behavior: contain;
  }

  .lenis.lenis-stopped {
    overflow: hidden;
  }

  .lenis.lenis-scrolling {
    /* Placeholder for scroll-in-progress state */
  }

  /* ============================================
     MOTION UTILITIES
     ============================================ */

  /* Will-change hints — apply during animation, remove after */
  .will-change-transform {
    will-change: transform;
  }
  .will-change-opacity {
    will-change: opacity;
  }

  /* GPU-accelerated layer */
  .gpu {
    transform: translateZ(0);
    backface-visibility: hidden;
  }

  /* ============================================
     MIXED HEADLINE SYSTEM (Emphasis-based)
     ============================================ */
  .headline-sans {
    font-family: var(--font-family-serif);
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: -0.02em;
  }
  .headline-serif {
    font-family: var(--font-family-serif) !important;
    font-style: italic;
    font-weight: 400;
    text-transform: none;
    letter-spacing: 0.01em;
  }
  .headline-mixed {
    display: flex;
    flex-wrap: wrap;
    align-items: baseline;
    gap: 0.15em;
  }

  /* ============================================
     SACRED ILLUMINATION SCALE
     ============================================ */

  /* Mega: hero wordmarks, massive display */
  .type-mega {
    font-size: clamp(4rem, 12vw, 10rem);
    font-family: var(--font-family-serif) !important;
    font-weight: 400;
    line-height: 0.85;
    letter-spacing: -0.02em;
  }

  /* Micro: smallest labels, superscripts */
  .type-micro {
    font-size: clamp(0.6rem, 0.7vw, 0.75rem);
    font-family: var(--font-family-serif);
    letter-spacing: 0.15em;
    text-transform: uppercase;
    font-weight: 600;
  }

  /* Ornamental day number: massive, behind title, gold ghost */
  .type-day-ornament {
    font-family: var(--font-family-serif) !important;
    font-size: clamp(6rem, 18vw, 14rem);
    font-weight: 400;
    line-height: 0.7;
    color: var(--color-gold);
    opacity: 0.08;
    position: absolute;
    pointer-events: none;
    user-select: none;
  }

  /* Old-style numerals utility */
  .oldstyle-nums {
    font-variant-numeric: oldstyle-nums proportional-nums;
  }

  /* ============================================
     ORNAMENTAL DIVIDERS
     ============================================ */
  .ornament-divider {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin: 3rem auto;
    max-width: 200px;
  }
  .ornament-divider::before,
  .ornament-divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--color-gold);
    opacity: 0.2;
  }
  .ornament-divider .ornament {
    color: var(--color-gold);
    opacity: 0.3;
    font-size: 0.75rem;
  }
}

/* ============================================
   PRINT STYLESHEET
   ============================================ */
@media print {
  @page {
    margin: 2cm;
    size: A4;
  }

  /* Force light mode */
  :root,
  .dark {
    --color-bg: #ffffff !important;
    --color-fg: #000000 !important;
    --color-text-primary: #000000 !important;
    --color-text-secondary: #333333 !important;
    --color-text-tertiary: #666666 !important;
    --color-text-muted: #999999 !important;
    --color-border: #cccccc !important;
    --color-surface: #f5f5f5 !important;
    --color-surface-raised: #eeeeee !important;
    --color-gold: #8b6914 !important;
  }

  body {
    background: white !important;
    color: black !important;
    font-size: 12pt !important;
  }

  /* Branding header for print */
  body::before {
    content: 'EUANGELION';
    display: block;
    font-family: var(--font-family-serif);
    font-size: 10pt;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: #8b6914;
    padding-bottom: 0.5cm;
    margin-bottom: 0.5cm;
    border-bottom: 0.5pt solid #cccccc;
  }

  /* Hide navigation, scroll progress, buttons, interactive elements, chat FAB */
  nav,
  .scroll-progress,
  .skip-to-content,
  button,
  .scroll-indicator,
  footer,
  [role='dialog'],
  [aria-label='Open biblical research chat'] {
    display: none !important;
  }

  /* Show all animated elements in final state */
  [style*='opacity: 0'],
  [data-gsap] {
    opacity: 1 !important;
    transform: none !important;
  }

  /* Clean up layout */
  .min-h-screen {
    min-height: auto !important;
  }

  /* Scripture: constrain fullbleed to reading width */
  .scripture-block {
    border-left: 2pt solid #8b6914 !important;
    background: #f9f9f9 !important;
    max-width: 100% !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
  }

  /* Page breaks */
  h1,
  h2,
  h3 {
    page-break-after: avoid;
  }

  [class*='mb-24'],
  [class*='mb-40'] {
    page-break-inside: avoid;
  }

  /* Module sections: avoid breaking inside */
  .reading-flow > * {
    page-break-inside: avoid;
  }

  /* Links: show URL */
  a[href]::after {
    content: ' (' attr(href) ')';
    font-size: 0.8em;
    color: #666;
  }

  a[href^='/']::after,
  a[href^='#']::after {
    content: '';
  }

  /* Legal pages: clean print */
  .prose-legal {
    max-width: 100% !important;
  }
}
