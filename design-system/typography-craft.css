/**
 * EUANGELION Typography Craft System
 *
 * Master letterpress treatment — fine printing meets sacred text.
 * Instrument Serif carries both structural and expressive roles.
 *
 * Requires: --baseline, --font-family-display, --font-family-serif tokens from @theme
 */

/* ============================================
   OPTICAL SIZING
   Headlines: tighter tracking, lighter weight
   Body: looser tracking, regular weight
   Small text: slightly heavier for readability
   ============================================ */

.type-display {
  letter-spacing: -0.02em;
  font-weight: 300;
  font-family: var(--font-family-serif);
}

.type-body {
  letter-spacing: 0.01em;
  font-weight: 400;
  font-family: var(--font-family-serif);
}

.type-small {
  letter-spacing: 0.02em;
  font-weight: 500;
  font-family: var(--font-family-ui);
}

.type-caption {
  letter-spacing: 0.08em;
  font-weight: 600;
  text-transform: uppercase;
  font-family: var(--font-family-ui);
}

/* ============================================
   MIXED FONT UTILITIES
   Upright + italic contextual pairing
   ============================================ */

/* Upright: bold, uppercase, tight — for structural words */
.type-sans-display {
  font-family: var(--font-family-serif);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: -0.02em;
}

/* Serif: italic, lowercase, flowing — for organic words */
.type-serif-flow {
  font-family: var(--font-family-serif) !important;
  font-style: italic;
  font-weight: 400;
  text-transform: none;
  letter-spacing: normal;
}

/* Data context: lining numerals, tabular */
.type-data {
  font-variant-numeric: lining-nums tabular-nums;
  font-family: var(--font-family-serif);
}

/* ============================================
   OPENTYPE FEATURES
   Ligatures, numerals, kerning
   ============================================ */

.type-prose {
  font-feature-settings:
    'liga' 1,
    'clig' 1,
    'dlig' 0,
    'kern' 1;
  font-variant-ligatures: common-ligatures;
  font-variant-numeric: oldstyle-nums proportional-nums;
  hanging-punctuation: first last;
}

.type-prose blockquote {
  text-indent: -0.4em; /* Fallback for hanging punctuation */
}

/* ============================================
   DROP CAP
   Instrument Serif, gold, floating
   ============================================ */

.drop-cap::first-letter {
  font-family: var(--font-family-serif) !important;
  font-size: 5rem;
  float: left;
  line-height: 0.75;
  padding-right: 0.15em;
  margin-top: 0.05em;
  font-weight: 400;
  color: var(--color-gold);
}

@media (max-width: 767px) {
  .drop-cap::first-letter {
    font-size: 4rem;
  }
}

/* ============================================
   MULTI-COLUMN UTILITIES
   Desktop only, single-column on mobile
   ============================================ */

.columns-prose {
  column-count: 2;
  column-gap: 2rem;
  column-rule: 1px solid var(--color-border);
}

.columns-prose > * {
  break-inside: avoid;
}

.columns-3 {
  column-count: 3;
  column-gap: 2rem;
  column-rule: 1px solid var(--color-border);
}

.columns-3 > * {
  break-inside: avoid;
}

/* Mobile: always single column */
@media (max-width: 767px) {
  .columns-prose,
  .columns-3 {
    column-count: 1;
    column-rule: none;
  }
}

/* Min column width constraint */
@supports (column-width: 280px) {
  .columns-prose {
    column-width: 280px;
  }
  .columns-3 {
    column-width: 280px;
  }
}

/* ============================================
   BASELINE GRID
   8px base, vertical rhythm
   ============================================ */

.baseline-grid {
  --baseline: 8px;
  line-height: calc(3 * var(--baseline)); /* 24px */
}

.baseline-grid h1,
.baseline-grid h2,
.baseline-grid h3 {
  line-height: calc(5 * var(--baseline)); /* 40px */
}

.baseline-grid small,
.baseline-grid .text-sm {
  line-height: calc(2.5 * var(--baseline)); /* 20px */
}

/* ============================================
   PULL QUOTE (Enhanced)
   Hanging large quotation mark
   ============================================ */

.pull-quote-enhanced {
  position: relative;
  font-family: var(--font-family-serif);
  font-size: clamp(1.75rem, 3vw, 2.5rem);
  font-weight: 700;
  line-height: 1.3;
  max-width: 800px;
}

.pull-quote-enhanced::before {
  content: '\201C';
  font-family: var(--font-family-serif) !important;
  font-size: clamp(6rem, 10vw, 8rem);
  font-weight: 400;
  line-height: 0.5;
  color: var(--color-gold);
  opacity: 0.1;
  position: absolute;
  left: -0.1em;
  top: -0.1em;
}

/* ============================================
   SELECTION STYLES
   Gold on tehom — brand signature
   ============================================ */

::selection {
  background-color: var(--color-gold);
  color: var(--color-tehom);
}

/* ============================================
   PRINT OVERRIDES
   Full craft visible in print
   ============================================ */

@media print {
  .drop-cap::first-letter {
    color: #8b6914;
  }

  .columns-prose,
  .columns-3 {
    column-count: 2;
    column-rule: 1px solid #ccc;
  }

  .type-prose {
    font-variant-numeric: oldstyle-nums proportional-nums;
  }
}
