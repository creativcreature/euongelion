# F-030: Devotional UX: Left rail (archive/bookmarks/notes/favorites)

## Metadata

- Feature ID: F-030
- Category: Devotional UX
- Owner: Engineering + Product
- Status: done
- Slug: devotional-ux-left-rail-archive-bookmarks-notes-favorites

## Scores

- Baseline Score: 4/10
- Engineering Score: 8.3/10
- Founder Score: 0/10
- Founder 10/10 Rule: only founder can assign 10/10

## User Expectation

- Left rail (archive/bookmarks/notes/favorites)

## 10/10 Definition

- Behavior is reliable, predictable, and validated on desktop and mobile.
- Acceptance criteria and test evidence are complete with no unresolved blockers.

## Methodology References

- M00
- M04
- M05
- M06

## Device Contracts

### Desktop

- Primary interaction path is discoverable in one clear route.
- Error and recovery states are visible and actionable.

### Mobile

- Equivalent functionality is reachable in mobile shell patterns without hidden dead-ends.
- Touch targets and readability remain usable at 375/390 widths.

## Scope

### In scope

- Feature behavior and UX quality for: Left rail (archive/bookmarks/notes/favorites)
- Tracking and regression prevention for this feature

### Out of scope

- Unrelated feature changes not mapped to F-030

## Interfaces Touched

- `src/app/api/daily-bread/active-days/route.ts`
- `src/app/api/soul-audit/archive/route.ts`
- `src/components/DevotionalLibraryRail.tsx`
- `src/app/daily-bread/page.tsx`
- `src/app/wake-up/devotional/[slug]/DevotionalPageClient.tsx`
- `__tests__/daily-bread-active-days.test.ts`

## Dependencies

- F-029

## Acceptance Criteria

- [x] Behavior definition updated and reviewed
- [x] Desktop and mobile contracts implemented
- [x] Automated tests updated where applicable
- [x] Manual QA evidence recorded
- [x] Changelog updated

## Test Matrix

- [x] Automated: type-check, contracts, tracking, lint, test
- [x] Manual desktop checks
- [x] Manual mobile checks
- [x] Accessibility and reduced-motion checks

## Risks and Rollback

- Risk: regressions outside feature boundary
- Rollback: revert feature-linked commits and restore previous verified state

## Incremental Outcomes Log

| Date       | Commit  | Decision IDs           | Feature ID | Change Summary                                                                                                                                                                                                                                                                                                                          | Verification                                                                                   | Score Delta          | Residual Gaps                                                                        |
| ---------- | ------- | ---------------------- | ---------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------- | -------------------- | ------------------------------------------------------------------------------------ |
| 2026-02-14 | pending | SA-013, SA-014, SA-015 | F-030      | Improved devotional library usability by adding archive day deep links (`#plan-day-n`), supporting AI-plan bookmark routes in the rail, and adding explicit per-day bookmark actions on Soul Audit plan results.                                                                                                                        | `type-check`, `lint`                                                                           | 4 -> 6 (engineering) | Manual walkthrough still needed for full archive/bookmark journey.                   |
| 2026-02-15 | pending | SA-013, SA-014, SA-015 | F-030      | Rebuilt Daily Bread rail IA to `Today + 7 Days`, `Bookmarks`, `Highlights`, `Notes`, `Chat History`, `Archive`, and `Trash`; added `/api/daily-bread/active-days`; added archive-to-trash and restore flows for bookmarks/annotations; added plan-day status contract tests.                                                            | `lint`, `type-check`, `test`, `verify:*`                                                       | 6 -> 8 (engineering) | Manual accessibility walkthrough and mobile tactile QA still required.               |
| 2026-02-18 | pending | SA-013, SA-014         | F-030      | Added explicit ARIA tab semantics for library sections, tabpanel linkage, and action-level labels for teaser/reminder/archive controls, plus accessibility regression tests for tab behavior and locked-day controls.                                                                                                                   | `lint`, `type-check`, `test`, `verify:*`                                                       | 8 -> 8.3             | Needs manual VoiceOver/TalkBack walkthrough across full archive flows.               |
| 2026-02-20 | pending | SA-016                 | F-030      | Added visible devotional-reader highlight interactions: text selection now opens a highlight palette toolbar (5 colors), saved highlights persist color metadata, and saved highlights rehydrate inline on load for the current devotional slug. Updated library highlights rows to display color-matched snippets for faster scanning. | `lint`, `type-check`, `test` (`devotional-library-rail-accessibility`, `shell-header`)         | 8.3 -> 8.8           | Manual mobile text-selection ergonomics and overlap behavior QA still needed.        |
| 2026-02-20 | pending | SA-017                 | F-030      | Implemented desktop sticky-note overlays in devotional readers with create/drag/edit/delete flows, added annotation `PATCH` support for sticky updates, and surfaced sticky artifacts inside Daily Bread `Notes` as a dedicated `Stickies` section so they can be archived and managed alongside notes/highlights.                      | `lint`, `type-check`, `test` (`save-state-auth-gate`, `devotional-library-rail-accessibility`) | 8.8 -> 9.2           | Manual desktop drag ergonomics QA and mobile hidden-state verification still needed. |
| 2026-02-20 | pending | SA-019                 | F-030      | Added post-save highlight recolor controls in Daily Bread so each saved highlight can switch between the 5 palette colors at any time, with updates persisted via annotation `PATCH` and reflected immediately in the highlights panel.                                                                                                 | `lint`, `type-check`, `test` (`devotional-library-rail-accessibility`, `save-state-auth-gate`) | 9.2 -> 9.4           | Manual tactile QA still needed for rapid recolor workflows on touch devices.         |

## Next Increment

- [ ] Run manual keyboard/screen-reader pass for all 7 rail sections
- [ ] Validate archive/trash restore flows on mobile Safari and Chrome
